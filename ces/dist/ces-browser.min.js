var CES=function(){var t=function(e,n){var i=t.resolve(e,n||"/"),r=t.modules[i];if(!r)throw Error("Failed to resolve module "+e+", tried "+i);var o=t.cache[i],s=o?o.exports:r();return s};return t.paths=[],t.modules={},t.cache={},t.extensions=[".js",".coffee",".json"],t._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},t.resolve=function(){return function(e,n){function i(e){if(e=a.normalize(e),t.modules[e])return e;for(var n=0;t.extensions.length>n;n++){var i=t.extensions[n];if(t.modules[e+i])return e+i}}function r(e){e=e.replace(/\/+$/,"");var n=a.normalize(e+"/package.json");if(t.modules[n]){var r=t.modules[n](),o=r.browserify;if("object"==typeof o&&o.main){var s=i(a.resolve(e,o.main));if(s)return s}else if("string"==typeof o){var s=i(a.resolve(e,o));if(s)return s}else if(r.main){var s=i(a.resolve(e,r.main));if(s)return s}}return i(e+"/index")}function o(t,e){for(var n=s(e),o=0;n.length>o;o++){var a=n[o],u=i(a+"/"+t);if(u)return u;var f=r(a+"/"+t);if(f)return f}var u=i(t);return u?u:void 0}function s(t){var e;e="/"===t?[""]:a.normalize(t).split("/");for(var n=[],i=e.length-1;i>=0;i--)if("node_modules"!==e[i]){var r=e.slice(0,i+1).join("/")+"/node_modules";n.push(r)}return n}if(n||(n="/"),t._core[e])return e;var a=t.modules.path();n=a.resolve("/",n);var u=n||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var f=i(a.resolve(u,e))||r(a.resolve(u,e));if(f)return f}var c=o(e,u);if(c)return c;throw Error("Cannot find module '"+e+"'")}}(),t.alias=function(e,n){var i=t.modules.path(),r=null;try{r=t.resolve(e+"/package.json","/")}catch(o){r=t.resolve(e,"/")}for(var s=i.dirname(r),a=(Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e})(t.modules),u=0;a.length>u;u++){var f=a[u];if(f.slice(0,s.length+1)===s+"/"){var c=f.slice(s.length);t.modules[n+c]=t.modules[s+c]}else f===s&&(t.modules[n]=t.modules[s])}},function(){var e={},n="undefined"!=typeof window?window:{},i=!1;t.define=function(r,o){!i&&t.modules.__browserify_process&&(e=t.modules.__browserify_process(),i=!0);var s=t._core[r]?"":t.modules.path().dirname(r),a=function(e){var n=t(e,s),i=t.cache[t.resolve(e,s)];return i&&null===i.parent&&(i.parent=u),n};a.resolve=function(e){return t.resolve(e,s)},a.modules=t.modules,a.define=t.define,a.cache=t.cache;var u={id:r,filename:r,exports:{},loaded:!1,parent:null};t.modules[r]=function(){return t.cache[r]=u,o.call(u.exports,a,u,u.exports,s,r,e,n),u.loaded=!0,u.exports}}}(),t.define("path",function(t,e,n,i,r,o){function s(t,e){for(var n=[],i=0;t.length>i;i++)e(t[i],i,t)&&n.push(t[i]);return n}function a(t,e){for(var n=0,i=t.length;i>=0;i--){var r=t[i];"."==r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var t="",e=!1,n=arguments.length;n>=-1&&!e;n--){var i=n>=0?arguments[n]:o.cwd();"string"==typeof i&&i&&(t=i+"/"+t,e="/"===i.charAt(0))}return t=a(s(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},n.normalize=function(t){var e="/"===t.charAt(0),n="/"===t.slice(-1);return t=a(s(t.split("/"),function(t){return!!t}),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(s(t,function(t){return t&&"string"==typeof t}).join("/"))},n.dirname=function(t){var e=u.exec(t)[1]||"",n=!1;return e?1===e.length||n&&3>=e.length&&":"===e.charAt(1)?e:e.substring(0,e.length-1):"."},n.basename=function(t,e){var n=u.exec(t)[2]||"";return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return u.exec(t)[3]||""},n.relative=function(t,e){function i(t){for(var e=0;t.length>e&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),s=Math.min(r.length,o.length),a=s,u=0;s>u;u++)if(r[u]!==o[u]){a=u;break}for(var f=[],u=a;r.length>u;u++)f.push("..");return f=f.concat(o.slice(a)),f.join("/")}}),t.define("__browserify_process",function(t,e,n,i,r,o){var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"browserify-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.binding=function(e){if("evals"===e)return t("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var e,n="/";o.cwd=function(){return n},o.chdir=function(i){e||(e=t("path")),n=e.resolve(i,n)}}()}),t.define("/src/class.js",function(t,e){var n=!1,i=/xyz/.test(function(){})?/\b_super\b/:/.*/,r=e.exports=function(){};r.extend=function(t){function e(){!n&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;n=!0;var o=new this;n=!1;for(var s in t)o[s]="function"==typeof t[s]&&"function"==typeof r[s]&&i.test(t[s])?function(t,e){return function(){var n=this._super;this._super=r[t];var i=e.apply(this,arguments);return this._super=n,i}}(s,t[s]):t[s];return e.prototype=o,e.prototype.constructor=e,e.extend=arguments.callee,e}}),t.define("/src/component.js",function(t,e){var n=t("./class");e.exports=n.extend({name:""})}),t.define("/src/entity.js",function(t,e){var n=t("./class"),i=t("./signal"),r=e.exports=n.extend({init:function(){this.id=r._id++,this._components={},this.onComponentAdded=new i,this.onComponentRemoved=new i},hasComponent:function(t){return void 0!==this._components["$"+t]},getComponent:function(t){return this._components["$"+t]},addComponent:function(t){this._components["$"+t.name]=t,this.onComponentAdded.emit(this,t.name)},removeComponent:function(t){this._components["$"+t]=void 0,this.onComponentRemoved.emit(this,t)}});r._id=0}),t.define("/src/signal.js",function(t,e){var n=t("./class");e.exports=n.extend({init:function(){this._listeners=[]},add:function(t){this._listeners.push(t)},remove:function(t){var e,n,i=this._listeners;for(e=0,n=i.length;n>e;++e)if(i[e]===t)return i.splice(e,1),!0;return!1},emit:function(){var t,e,n=arguments,i=this._listeners;for(t=0,e=i.length;e>t;++t)i[t].apply(null,n)}})}),t.define("/src/system.js",function(t,e){var n=t("./class");e.exports=n.extend({init:function(){this.world=null},update:function(){throw Error("Subclassed should override this method")}})}),t.define("/src/world.js",function(t,e){var n=t("./class"),i=t("./family"),r=t("./entitylist");e.exports=n.extend({init:function(){this._families={},this._systems=[],this._entities=new r},addSystem:function(t){return t.world=this,this._systems.push(t),this},removeSystem:function(t){var e,n,i;for(e=this._systems,n=0,i=e.length;i>n;++n)e[n]===t&&e.splice(n,1)},addEntity:function(t){var e,n,i;e=this._families;for(n in e)e[n].addEntityIfMatch(t);i=this,t.onComponentAdded.add(function(t,e){i._onComponentAdded(t,e)}),t.onComponentRemoved.add(function(t,e){i._onComponentRemoved(t,e)}),this._entities.add(t)},removeEntity:function(t){var e,n;e=this._families;for(n in e)e[n].removeEntity(t);this._entities.remove(t)},getEntities:function(){var t,e,n;if(t="$"+Array.prototype.join.call(arguments,","),e=this._families,!e[t])for(e[t]=new i(Array.prototype.slice.call(arguments)),n=this._entities.head;n;n=n.next)e[t].addEntityIfMatch(n.entity);return e[t].getEntities()},update:function(t){var e,n,i;for(e=this._systems,n=0,i=e.length;i>n;++n)e[n].update(t)},_onComponentAdded:function(t,e){var n,i;n=this._families;for(i in n)n[i].onComponentAdded(t,e)},_onComponentRemoved:function(t,e){var n,i;n=this._families;for(i in n)n[i].onComponentRemoved(t,e)}})}),t.define("/src/family.js",function(t,e){var n=t("./class"),i=t("./entitylist");e.exports=n.extend({init:function(t){this._componentNames=t,this._entities=new i},getEntities:function(){return this._entities.toArray()},addEntityIfMatch:function(t){!this._entities.has(t)&&this._matchEntity(t)&&this._entities.add(t)},removeEntity:function(t){this._entities.remove(t)},onComponentAdded:function(t){this.addEntityIfMatch(t)},onComponentRemoved:function(t,e){var n,i,r;if(this._entities.has(t))for(n=this._componentNames,i=0,r=n.length;r>i;++i)n[i]===e&&this._entities.remove(t)},_matchEntity:function(t){var e,n,i;for(e=this._componentNames,n=0,i=e.length;i>n;++n)if(!t.hasComponent(e[n]))return!1;return!0}})}),t.define("/src/entitylist.js",function(t,e){var n=t("./class"),i=n.extend({init:function(t){this.entity=t,this.prev=null,this.next=null}});e.exports=n.extend({init:function(){this.head=null,this.tail=null,this.length=0,this._entities={}},add:function(t){var e=new i(t);null===this.head?this.head=this.tail=e:(e.prev=this.tail,this.tail.next=e,this.tail=e),this.length+=1,this._entities[t.id]=e},remove:function(t){var e=this._entities[t.id];void 0!==e&&(null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this.length-=1,delete this._entities[t.id])},has:function(t){return void 0!==this._entities[t.id]},clear:function(){this.head=this.tail=null,this.length=0,this._entities={}},toArray:function(){var t,e;for(t=[],e=this.head;e;e=e.next)t.push(e.entity);return t}})}),t.define("/index.js",function(t,e){e.exports={Class:t("./src/class"),Component:t("./src/component"),Entity:t("./src/entity"),System:t("./src/system"),World:t("./src/world")}}),t("/index.js"),t("/index.js")}();